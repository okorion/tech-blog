---
title: "Express ë¯¸ë“¤ì›¨ì–´ íŒŒì´í”„ë¼ì¸ í•´ë¶€"
description: "Express ìš”ì²­ íë¦„, ë¯¸ë“¤ì›¨ì–´ ì—­í•  ë¶„ë¦¬, nextì™€ ì—ëŸ¬ í•¸ë“¤ëŸ¬ ìœ„ì¹˜ë¥¼ ì •ë¦¬"
categories: ["ğŸŸ¢ Node.js & Backend"]
tags: ["Express", "Middleware", "Routing", "ErrorHandling"]
image: /assets/posts/2025-12-16-node-js/image.png
date: 2025-12-16 12:37:00 +09:00
last_modified_at: 2025-12-16 12:37:00 +09:00
---

## ê²°ë¡  ìš”ì•½

* **ExpressëŠ” ë¼ìš°íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹ˆë¼ ìš”ì²­(Request)ì„ ì²˜ë¦¬í•˜ëŠ” íŒŒì´í”„ë¼ì¸ ê´€ë¦¬ìë‹¤.**
* í•µì‹¬ì€ `req â†’ middleware chain â†’ res` íë¦„ì´ë©°, **ìˆœì„œ(order)ê°€ ë™ì‘ì„ ê²°ì •**í•œë‹¤.
* ë¯¸ë“¤ì›¨ì–´ëŠ” ì „ì²˜ë¦¬Â·ë¼ìš°íŒ…Â·ì—ëŸ¬ ì²˜ë¦¬ì˜ **ì—­í•  ë¶„ë¦¬**ê°€ ìƒëª…ì´ë‹¤.
* `next()`ëŠ” â€œë‹¤ìŒìœ¼ë¡œ ë„˜ê¸´ë‹¤â€ê°€ ì•„ë‹ˆë¼ **ì œì–´ê¶Œì„ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê³„ì•½**ì´ë‹¤.
* 404ì™€ ì—ëŸ¬ í•¸ë“¤ëŸ¬ëŠ” **ìœ„ì¹˜ê°€ í‹€ë¦¬ë©´ ì ˆëŒ€ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤**.

---

# Express.jsì˜ ë³¸ì§ˆ: ìš”ì²­ íŒŒì´í”„ë¼ì¸ê³¼ ë¯¸ë“¤ì›¨ì–´

## 1ï¸âƒ£ ì •ì˜: ExpressëŠ” ë¬´ì—‡ì„ ê´€ë¦¬í•˜ëŠ”ê°€

ExpressëŠ” HTTP ì„œë²„ ìœ„ì— ì–¹íŒ **ìš”ì²­ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ê´€ë¦¬ì**ë‹¤.
ê° ìš”ì²­ì€ **ë“±ë¡ëœ ë¯¸ë“¤ì›¨ì–´ë¥¼ ìœ„ì—ì„œ ì•„ë˜ë¡œ ìˆœì°¨ í†µê³¼**í•˜ë©°, ì‘ë‹µì´ ì „ì†¡ë˜ëŠ” ìˆœê°„ íŒŒì´í”„ë¼ì¸ì€ ì¢…ë£Œëœë‹¤.

> í•µì‹¬ ê´€ì  ì „í™˜
> âŒ â€œURL â†’ í•¨ìˆ˜ ë§¤í•‘â€
> âœ… â€œìš”ì²­ì´ íë¥´ëŠ” íŒŒì´í”„ì— ì–´ë–¤ í•„í„°ë¥¼ ì–´ë–¤ ìˆœì„œë¡œ ë¼ìš¸ ê²ƒì¸ê°€â€

---

## 2ï¸âƒ£ ì™œ í•„ìš”í•œê°€: if/else ì„œë²„ì˜ ë¶•ê´´ë¥¼ ë§‰ê¸° ìœ„í•´

Nodeì˜ `http.createServer()`ë¡œë„ ì„œë²„ëŠ” ë§Œë“¤ ìˆ˜ ìˆë‹¤.
ë¬¸ì œëŠ” **ìš”ì²­ ì¡°ê±´ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ì œì–´ íë¦„ì´ ë¶•ê´´**í•œë‹¤ëŠ” ì ì´ë‹¤.

* ì¸ì¦ ì—¬ë¶€
* ë°”ë”” íŒŒì‹±
* ë¡œê¹…
* ê¶Œí•œ ì²´í¬
* ì—ëŸ¬ ì²˜ë¦¬

ExpressëŠ” ì´ë“¤ì„ **â€œìˆœì„œ ìˆëŠ” ë‹¨ê³„â€ë¡œ ë¶„ë¦¬**í•˜ê²Œ ê°•ì œí•œë‹¤.
ì´ ê°•ì œê°€ ì—†ìœ¼ë©´, ì½”ë“œ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ë²„ê·¸ëŠ” êµ¬ì¡°ì ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤.

---

## 3ï¸âƒ£ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€: req â†’ middleware chain â†’ res

### ìš”ì²­ ì²˜ë¦¬ íë¦„(ë‹¨ê³„ë³„)

1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ìˆ˜ì‹ 
2. `app.use / app.get / app.post` ë“±ìœ¼ë¡œ ë“±ë¡ëœ ë¯¸ë“¤ì›¨ì–´ë¥¼ **ë“±ë¡ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰**
3. ê° ë¯¸ë“¤ì›¨ì–´ëŠ” ì„¸ ê°€ì§€ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ

   * `res.send / res.json / res.end` â†’ ì‘ë‹µ ì¢…ë£Œ
   * `next()` â†’ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ì „ë‹¬
   * `next(err)` â†’ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¡œ ì í”„
4. ì‘ë‹µì´ ì „ì†¡ë˜ë©´ íŒŒì´í”„ë¼ì¸ ì¢…ë£Œ

ì´ êµ¬ì¡° ë•Œë¬¸ì— **â€œìˆœì„œâ€ëŠ” ë¡œì§ ê·¸ ìì²´**ë‹¤.

---

## 4ï¸âƒ£ ë¯¸ë“¤ì›¨ì–´ì˜ 3ê°€ì§€ ì—­í•  (ì„ì´ë©´ ë°”ë¡œ ë§ê°€ì§„ë‹¤)

### â‘  ì „ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ (Pre-processing)

ìš”ì²­ì„ â€œì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœâ€ë¡œ ë§Œë“ ë‹¤.

* ë°”ë”” íŒŒì‹± (`express.json`)
* ì¸ì¦/ê¶Œí•œ
* ë¡œê¹…
* request id ë¶€ì—¬

```js
app.use(express.json());
app.use(authMiddleware);
```

**íŠ¹ì§•**

* ëŒ€ë¶€ë¶„ `app.use`
* ìš”ì²­ì„ ë³€ê²½(req í™•ì¥)í•˜ì§€ë§Œ, ì‘ë‹µì€ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤

---

### â‘¡ ë¼ìš°íŒ… ë¯¸ë“¤ì›¨ì–´ (Routing)

ìš”ì²­ì„ **ì˜ë¯¸ ìˆëŠ” ì‘ì—… ë‹¨ìœ„**ë¡œ ë¶„ê¸°í•œë‹¤.

```js
app.get('/products/:id', productController.getProduct);
```

**íŠ¹ì§•**

* URL + HTTP method ê¸°ì¤€
* ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ â€œì…êµ¬â€ ì—­í• 

---

### â‘¢ ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ (Error handling)

ì •ìƒ íë¦„ê³¼ **ì™„ì „íˆ ë‹¤ë¥¸ íŒŒì´í”„ë¼ì¸**ì´ë‹¤.

```js
app.use((err, req, res, next) => {
  res.status(500).json({ message: err.message });
});
```

**íŠ¹ì§•**

* ì¸ìê°€ 4ê°œ `(err, req, res, next)`
* ë°˜ë“œì‹œ **ëª¨ë“  ë¼ìš°íŠ¸ ë’¤**ì— ìœ„ì¹˜í•´ì•¼ í•œë‹¤

---

## 5ï¸âƒ£ `next()`ì˜ ì˜ë¯¸ì™€ í”í•œ ë²„ê·¸

### next()ì˜ ì •í™•í•œ ì˜ë¯¸

* â€œë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•˜ë¼â€
* í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ **ìš”ì²­ì€ ê±°ê¸°ì„œ ë©ˆì¶˜ë‹¤**

### í”í•œ ë²„ê·¸ 3ì¢…

#### âŒ 1. next() ëˆ„ë½ â†’ ë¬´í•œ ëŒ€ê¸°

```js
app.use((req, res, next) => {
  if (!req.user) {
    res.status(401).end();
  }
  // next() ì—†ìŒ â†’ ì¸ì¦ëœ ìš”ì²­ë„ ë©ˆì¶¤
});
```

#### âŒ 2. ì‘ë‹µ í›„ next() í˜¸ì¶œ â†’ ì‘ë‹µ ì¤‘ë³µ

```js
res.json(data);
next(); // ì´ë¯¸ ì‘ë‹µí–ˆëŠ”ë° ë‹¤ìŒìœ¼ë¡œ ì „ë‹¬
```

#### âŒ 3. ì—ëŸ¬ë¥¼ ë˜ì§€ê³  next(err) ì•ˆ ì”€

```js
throw new Error('fail'); // async contextì—ì„œ ëˆ„ë½ ê°€ëŠ¥
```

âœ… **í•´ê²° íŒ¨í„´**

* ì‘ë‹µì„ ë³´ëƒˆìœ¼ë©´ return
* ì—ëŸ¬ëŠ” `next(err)`ë¡œ ìœ„ì„
* ë¯¸ë“¤ì›¨ì–´ í•˜ë‚˜ = ì±…ì„ í•˜ë‚˜

---

## 6ï¸âƒ£ ë¼ìš°í„° ë¶„ë¦¬: Express Router ì„¤ê³„ ì›ì¹™

### ê²°ë¡ 

ë¼ìš°í„°ëŠ” â€œíŒŒì¼ ë¶„ë¦¬â€ê°€ ì•„ë‹ˆë¼ **ë„ë©”ì¸ ê²½ê³„ ì„ ì–¸**ì´ë‹¤.

### ê¸°ë³¸ ì›ì¹™

* **URL prefix = ë„ë©”ì¸**
* Router ë‚´ë¶€ì—ì„œëŠ” ìƒëŒ€ ê²½ë¡œë§Œ ì‚¬ìš©
* ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë¼ìš°í„° ë°–

```js
// app.js
app.use('/products', productRoutes);

// routes/products.js
router.get('/:id', controller.getProduct);
```

### ë¼ìš°í„°ê°€ ì±…ì„ì§€ë©´ ì•ˆ ë˜ëŠ” ê²ƒ

* DB ì ‘ê·¼
* ê²€ì¦ ë¡œì§
* ì¸ì¦ íŒë‹¨

â†’ ë¼ìš°í„°ëŠ” **íŒŒì´í”„ ì—°ê²°ì**, ë¡œì§ì€ ë¯¸ë“¤ì›¨ì–´/ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì´ë™

---

## 7ï¸âƒ£ 404 ì²˜ë¦¬ì™€ ì—ëŸ¬ í•¸ë“¤ëŸ¬ì˜ ìœ„ì¹˜ ê·œì¹™

### 404ëŠ” â€œëª¨ë“  ë¼ìš°íŠ¸ë¥¼ í†µê³¼í•œ ë’¤â€ì—ë§Œ ì˜ë¯¸ê°€ ìˆë‹¤

```js
app.use((req, res) => {
  res.status(404).send('Not Found');
});
```

### ì—ëŸ¬ í•¸ë“¤ëŸ¬ ìœ„ì¹˜ ê·œì¹™

```text
[ì „ì²˜ë¦¬]
[ë¼ìš°íŠ¸]
[404]
[ì—ëŸ¬ í•¸ë“¤ëŸ¬] â† ë°˜ë“œì‹œ ë§¨ ë§ˆì§€ë§‰
```

**ì´ìœ **

* ExpressëŠ” ìœ„ì—ì„œ ì•„ë˜ë¡œë§Œ íƒìƒ‰
* ì—ëŸ¬ í•¸ë“¤ëŸ¬ëŠ” â€œìµœí›„ì˜ ì•ˆì „ë§â€

---

## 8ï¸âƒ£ ë‚˜ìœ ì˜ˆ vs ê°œì„  ì˜ˆ

### âŒ ë‚˜ìœ ì˜ˆ: ëª¨ë“  ê²ƒì´ ë¼ìš°íŠ¸ì— ì„ì„

```js
app.post('/order', (req, res) => {
  if (!req.body.user) return res.status(400).end();
  db.save(req.body);
  res.json({ ok: true });
});
```

ë¬¸ì œ:

* ê²€ì¦, ë¹„ì¦ˆë‹ˆìŠ¤, ì‘ë‹µì´ í•œ ë©ì–´ë¦¬
* í…ŒìŠ¤íŠ¸/ì¬ì‚¬ìš© ë¶ˆê°€

---

### âœ… ê°œì„  ì˜ˆ: ë¯¸ë“¤ì›¨ì–´ ë¶„ë¦¬

```js
router.post(
  '/',
  validateOrder,
  orderController.createOrder
);
```

* ê²€ì¦/ë¡œì§/ì‘ë‹µ ë¶„ë¦¬
* íŒŒì´í”„ë¼ì¸ì´ ì½í˜

---

## Express êµ¬ì¡° í…œí”Œë¦¿ (ê¶Œì¥)

```text
src/
 â”œâ”€ app.js
 â”œâ”€ routes/
 â”‚   â”œâ”€ products.js
 â”‚   â””â”€ orders.js
 â”œâ”€ controllers/
 â”œâ”€ middleware/
 â”‚   â”œâ”€ auth.js
 â”‚   â”œâ”€ validate.js
 â”‚   â””â”€ error.js
 â””â”€ services/
```

---

## ì‹¤ë¬´ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì¬í•™ìŠµìš©)

* [ ] Expressë¥¼ â€œìš”ì²­ íŒŒì´í”„ë¼ì¸â€ìœ¼ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
* [ ] ë¯¸ë“¤ì›¨ì–´ 3ì¢…(ì „ì²˜ë¦¬/ë¼ìš°íŒ…/ì—ëŸ¬)ì„ êµ¬ë¶„í•´ ì“¸ ìˆ˜ ìˆë‹¤
* [ ] `next()` ëˆ„ë½/ì¤‘ë³µ í˜¸ì¶œì˜ ìœ„í—˜ì„ ì•Œê³  ìˆë‹¤
* [ ] ë¼ìš°í„°ëŠ” ë„ë©”ì¸ ê²½ê³„ë§Œ ì±…ì„ì§„ë‹¤
* [ ] 404ëŠ” ëª¨ë“  ë¼ìš°íŠ¸ ë’¤ì— ìˆë‹¤
* [ ] ì—ëŸ¬ í•¸ë“¤ëŸ¬ëŠ” íŒŒì¼Â·ìˆœì„œê°€ ë³´ì¥ëœë‹¤
* [ ] ì‘ë‹µ í›„ì—ëŠ” ë°˜ë“œì‹œ return í•œë‹¤
* [ ] ë¯¸ë“¤ì›¨ì–´ í•˜ë‚˜ì— ì±…ì„ í•˜ë‚˜ë§Œ ìˆë‹¤

---

- ì°¸ê³ : [  NodeJS ì™„ë²½ ê°€ì´ë“œ : MVC, REST APIs, GraphQL, Deno
](https://www.udemy.com/course/nodejs-mvc-rest-apis-graphql-deno/)
